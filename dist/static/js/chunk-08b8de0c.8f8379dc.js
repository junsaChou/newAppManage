(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-08b8de0c"],{"07a1":function(e,t,a){},"206f":function(e,t,a){"use strict";var i=a("07a1"),l=a.n(i);l.a},"333d":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pagination-wrapper"},[a("el-pagination",{attrs:{background:e.background,"current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.pageSize,total:e.total,layout:e.layout},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},l=[],o=(a("a9e3"),{name:"Pagination",props:{page:{type:Number,default:1,required:!0},limit:{type:Number,default:10,required:!0},background:{type:Boolean,default:!0},pageSizes:{type:Array,default:function(){return[10,15,20,50]}},total:{type:Number,default:0,required:!0},layout:{type:String,default:"total, prev, pager, next, sizes, jumper"}},computed:{currentPage:{get:function(){return this.page},set:function(e){console.log(e),this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e})},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize})}}}),r=o,s=(a("206f"),a("2877")),n=Object(s["a"])(r,i,l,!1,null,null,null);t["a"]=n.exports},"53be":function(e,t,a){"use strict";var i=a("88d9"),l=a.n(i);l.a},"88d9":function(e,t,a){},abca:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table-classic-wrapper"},[a("el-card",{attrs:{shadow:"always"}},[a("el-form",{ref:"searchForm",staticClass:"search-form",attrs:{inline:!0,model:e.listQuery,"label-width":"90px"}},[a("el-form-item",{attrs:{label:"订单号"}},[a("el-input",{attrs:{placeholder:"请填写"},model:{value:e.listQuery.orderNo,callback:function(t){e.$set(e.listQuery,"orderNo",t)},expression:"listQuery.orderNo"}})],1),a("el-form-item",{attrs:{label:"手机号码"}},[a("el-input",{attrs:{placeholder:"请填写"},model:{value:e.listQuery.phone,callback:function(t){e.$set(e.listQuery,"phone",t)},expression:"listQuery.phone"}})],1),a("el-form-item",{attrs:{label:"来源渠道"}},[a("el-input",{attrs:{placeholder:"请填写"},model:{value:e.listQuery.channel,callback:function(t){e.$set(e.listQuery,"channel",t)},expression:"listQuery.channel"}})],1),a("el-form-item",{attrs:{label:"退单状态"}},[a("el-select",{attrs:{placeholder:"审核状态"},model:{value:e.listQuery.state,callback:function(t){e.$set(e.listQuery,"state",t)},expression:"listQuery.state"}},[a("el-option",{attrs:{value:"",label:"全部"}}),a("el-option",{attrs:{value:0,label:"未申请"}}),a("el-option",{attrs:{value:1,label:"拒绝退单"}}),a("el-option",{attrs:{value:2,label:"待审核"}}),a("el-option",{attrs:{value:3,label:"半价退"}}),a("el-option",{attrs:{value:4,label:"全款退"}})],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("搜索")]),a("el-button",{attrs:{type:"warning"},on:{click:e.onReset}},[e._v("重置")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark",size:"medium"}},[a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"orderNo",label:"订单号",align:"center",width:"120",sortable:""}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"申请时间",align:"center",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatDate")(t.row.applyTime)))])]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"channel",label:"渠道来源",align:"center"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"customerName",label:"用户姓名",align:"center"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"customerPhone",label:"用户手机号",align:"center",width:"150"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"userName",label:"经理姓名",align:"center"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"userPhone",label:"经理手机号码",align:"center",width:"150"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"balance",label:"账号余额",align:"center"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"抢单时间",align:"center",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatDate")(t.row.buyTime)))])]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"amount",label:"订单价格",align:"center"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"退单状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s("0"==t.row.chargebackState?"未申请":"1"==t.row.chargebackState?"拒绝退单":"2"==t.row.chargebackState?"待审核":"3"==t.row.chargebackState?"半价退":"全款退"))]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"chargebackRemark",label:"拒绝原因",align:"center"}}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("拒绝")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.views(t.row.id)}}},[e._v("查看详情")]),a("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(a){return e.handleState(t.$index,t.row)}}},[e._v("退单")])]}}])})],1),a("Pagination",{attrs:{total:e.total,page:e.listQuery.pageIndex,limit:e.listQuery.pageSize},on:{"update:page":function(t){return e.$set(e.listQuery,"pageIndex",t)},"update:limit":function(t){return e.$set(e.listQuery,"pageSize",t)},pagination:e.PostFetchData}}),a("el-dialog",{staticClass:"dialog-form",attrs:{title:e.formVisibleList.title,visible:e.formVisibleList.formVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){return e.$set(e.formVisibleList,"formVisible",t)}}},[a("el-form",{ref:"dialogForm",attrs:{model:e.dialogForm,rules:e.formRules,"label-width":"100px"}},["退单拒绝原因"==e.formVisibleList.title?a("el-form-item",{attrs:{label:"拒绝原因：",prop:"remark"}},[a("el-input",{attrs:{clearable:"",type:"textarea",resize:"none",placeholder:"请输入拒绝原因!","show-word-limit":"",maxlength:"50",rules:{required:!0,message:"请输入拒绝原因"}},model:{value:e.dialogForm.remark,callback:function(t){e.$set(e.dialogForm,"remark",t)},expression:"dialogForm.remark"}})],1):e._e(),"温馨提示"==e.formVisibleList.title?a("el-form-item",{attrs:{label:"同意退单：",prop:"type"}},[a("el-radio-group",{model:{value:e.dialogForm.type,callback:function(t){e.$set(e.dialogForm,"type",t)},expression:"dialogForm.type "}},[a("el-radio",{attrs:{label:3}},[e._v("半价退单")]),a("el-radio",{attrs:{label:4}},[e._v("全款退单")])],1)],1):e._e(),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"退款详情"==e.formVisibleList.title,expression:"formVisibleList.title == '退款详情'"}],attrs:{label:"退单原因："}},[a("el-input",{attrs:{disabled:""},model:{value:e.dialogForm.chargebackCause,callback:function(t){e.$set(e.dialogForm,"chargebackCause",t)},expression:"dialogForm.chargebackCause"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"退款详情"==e.formVisibleList.title,expression:"formVisibleList.title == '退款详情'"}],attrs:{label:"详细原因："}},[a("el-input",{attrs:{disabled:""},model:{value:e.dialogForm.detailedReasons,callback:function(t){e.$set(e.dialogForm,"detailedReasons",t)},expression:"dialogForm.detailedReasons"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"退款详情"==e.formVisibleList.title,expression:"formVisibleList.title == '退款详情'"}],attrs:{label:"上传图片："}},[e.companyImg.length>0?a("div",{staticClass:"demo-image"},e._l(e.companyImg,(function(e){return a("div",{key:e,staticClass:"block"},[a("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e,fit:"cover","preview-src-list":[e]}})],1)})),0):e._e()]),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"退款详情"==e.formVisibleList.title,expression:"formVisibleList.title == '退款详情'"}],attrs:{label:"拒绝原因："}},[a("el-input",{attrs:{disabled:""},model:{value:e.dialogForm.chargebackRemark,callback:function(t){e.$set(e.dialogForm,"chargebackRemark",t)},expression:"dialogForm.chargebackRemark"}})],1),a("div",{staticClass:"footer-item"},[a("el-button",{on:{click:e.cancleForm}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",disabled:e.isSubmit},on:{click:function(t){return e.submitForm("dialogForm")}}},[e._v("确 定")])],1)],1)],1)],1)],1)},l=[],o=(a("4160"),a("c975"),a("fb6a"),a("b64b"),a("ac1f"),a("1276"),a("159b"),a("058a")),r=a("333d"),s={name:"Table",components:{Pagination:r["a"]},data:function(){return{listLoading:!0,listQuery:{channel:null,orderNo:null,phone:null,state:null,pageIndex:1,pageSize:10},dialogForm:{id:null,remark:null,type:"",img:null,chargebackRemark:null,chargebackCause:null,detailedReasons:null},total:0,tableData:[],companyImg:[],formVisible:!1,formVisibleList:{formVisible:!1,title:"编辑",isCreate:!1},corsTokem:{SecretId:null,SecretKey:null,region:null,sessionToken:null,filePath:null,Expires:null,imgDataCor:null},formRules:{remark:[{required:!0,message:"请输入拒绝原因",trigger:"blur"}],type:[{required:!0,message:"请选择退款状态",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3456789]\d{9}$/,message:"请输入正确的手机号",trigger:"blur"}]},isSubmit:!1}},created:function(){this.PostFetchData(),this.apiGetCosTokenInit()},methods:{handleEdit:function(e,t){console.log(e,t),this.formVisibleList.formVisible=!0,this.formVisibleList.title="退单拒绝原因",this.dialogForm.id=t.id},handleState:function(e,t){this.formVisibleList.formVisible=!0,this.formVisibleList.title="温馨提示",this.dialogForm.id=t.id},handleDelete:function(e,t){var a=this;console.log(e,t),this.$confirm("此操作将删除选中数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.$message({type:"success",message:"删除成功!"})})).catch((function(){a.$message({type:"info",message:"已取消删除"})}))},handleClose:function(){this.cancleForm()},PostFetchData:function(){var e=this;this.listLoading=!0,console.log(this.listQuery);var t=this.listQuery;Object(o["e"])(t).then((function(t){console.log(t),200==t.code&&(e.total=t.data.total,e.tableData=t.data.list,e.listLoading=!1)})).catch((function(t){console.log(t),e.listLoading=!1}))},onSubmit:function(){this.PostFetchData()},onReset:function(){var e=this;Object.keys(e.listQuery).forEach((function(t){e.listQuery[t]=null})),this.listQuery.pageIndex=1,this.listQuery.pageSize=10,this.PostFetchData()},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return t.isSubmit=!1,!1;if("退单拒绝原因"==t.formVisibleList.title){var a={remark:t.dialogForm.remark,id:t.dialogForm.id,state:"1"};t.passInput(a)}else if("温馨提示"==t.formVisibleList.title){var i={id:t.dialogForm.id,state:t.dialogForm.type};t.passInput(i)}else t.cancleForm()}))},cancleForm:function(){var e=this;Object.keys(this.dialogForm).forEach((function(t){e.dialogForm[t]=null})),this.companyImg=[],console.log(this.dialogForm),this.formVisibleList.formVisible=!1},views:function(e){var t=this,a={userOrderId:e};Object(o["x"])(a).then((function(e){if(200===e.code){if(t.formVisibleList.formVisible=!0,t.formVisibleList.title="退款详情",t.dialogForm.chargebackRemark=e.data.chargebackRemark,t.dialogForm.chargebackCause=e.data.chargebackCause,t.dialogForm.detailedReasons=e.data.detailedReasons,null!=e.data.img&&""!=e.data.img){var a=e.data.img.split(",");t.companyImg=a,a.forEach((function(e,a){""!=e&&t.corsTcUrl(e,a,"companyImg")}))}}else t.$message({type:"warning",message:e.message})})).catch((function(e){console.log(e),t.listLoading=!1}))},apiGetCosTokenInit:function(){var e=this,t={type:1};Object(o["y"])(t).then((function(t){200===t.code?(e.corsTokem.SecretId=t.data.tmpSecretId,e.corsTokem.SecretKey=t.data.tmpSecretKey,e.corsTokem.Expires=t.data.expiredTime,e.corsTokem.region=t.data.region,e.corsTokem.filePath=t.data.filePath,e.corsTokem.sessionToken=t.data.sessionToken):e.$message({type:"warning",message:t.message})})).catch((function(t){console.log(t),e.listLoading=!1}))},corsTcUrl:function(e,t){var i=e.indexOf("tuidan"),l=this;l.imgDataCor=e.slice(i);var o=a("3438"),r=new o({getAuthorization:function(e,t){var a={TmpSecretId:l.corsTokem.SecretId,TmpSecretKey:l.corsTokem.SecretKey,XCosSecurityToken:l.corsTokem.sessionToken,ExpiredTime:l.corsTokem.Expires};t(a)}});r.getObjectUrl({Bucket:"qiangdan-1255789551",Region:l.corsTokem.region,Key:l.imgDataCor},(function(e,a){if(e)return console.log(e);if(a){var i=a.Url+(a.Url.indexOf("?")>-1?"&":"?")+"response-content-disposition=attachment";l.$set(l.companyImg,t,i)}}))},passInput:function(e){var t=this;Object(o["P"])(e).then((function(e){200===e.code?(t.cancleForm(),t.PostFetchData()):t.$message({type:"warning",message:e.message})})).catch((function(e){console.log(e),t.listLoading=!1}))}}},n=s,c=(a("53be"),a("2877")),u=Object(c["a"])(n,i,l,!1,null,null,null);t["default"]=u.exports}}]);